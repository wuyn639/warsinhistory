<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data transformation | Wars in History, 1816-2007</title>
  <meta name="description" content="Chapter 3 Data transformation | Wars in History, 1816-2007" />
  <meta name="generator" content="bookdown 0.16 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data transformation | Wars in History, 1816-2007" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data transformation | Wars in History, 1816-2007" />
  
  
  

<meta name="author" content="Priyanka Lahoti, Hima Bindu Bhardwaj, Jasmine Bao, Yingnan Wu" />


<meta name="date" content="2019-12-12" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="data-sources.html"/>
<link rel="next" href="missing-values.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.1/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.49.4/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.49.4/plotly-latest.min.js"></script>
<link href="libs/parallel-coordinates-2.1.8/parcoords.css" rel="stylesheet" />
<script src="libs/parcoords-binding-1.0.0/parcoords.js"></script>
<script src="libs/d3-5.10.0/d3.min.js"></script>



<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Wars in History</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="data-sources.html"><a href="data-sources.html"><i class="fa fa-check"></i><b>2</b> Data sources</a><ul>
<li class="chapter" data-level="2.1" data-path="data-sources.html"><a href="data-sources.html#sources"><i class="fa fa-check"></i><b>2.1</b> Sources</a></li>
<li class="chapter" data-level="2.2" data-path="data-sources.html"><a href="data-sources.html#format"><i class="fa fa-check"></i><b>2.2</b> Format</a></li>
<li class="chapter" data-level="2.3" data-path="data-sources.html"><a href="data-sources.html#variables"><i class="fa fa-check"></i><b>2.3</b> Variables</a></li>
<li class="chapter" data-level="2.4" data-path="data-sources.html"><a href="data-sources.html#additonal-information"><i class="fa fa-check"></i><b>2.4</b> Additonal Information</a></li>
<li class="chapter" data-level="2.5" data-path="data-sources.html"><a href="data-sources.html#issues-with-datasets"><i class="fa fa-check"></i><b>2.5</b> Issues with Datasets</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data-transformation.html"><a href="data-transformation.html"><i class="fa fa-check"></i><b>3</b> Data transformation</a><ul>
<li class="chapter" data-level="3.1" data-path="data-transformation.html"><a href="data-transformation.html#cow-data"><i class="fa fa-check"></i><b>3.1</b> COW data</a></li>
<li class="chapter" data-level="3.2" data-path="data-transformation.html"><a href="data-transformation.html#choropleth-maps"><i class="fa fa-check"></i><b>3.2</b> Choropleth maps</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="missing-values.html"><a href="missing-values.html"><i class="fa fa-check"></i><b>4</b> Missing values</a></li>
<li class="chapter" data-level="5" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>5</b> Results</a><ul>
<li class="chapter" data-level="5.1" data-path="results.html"><a href="results.html#general-edav"><i class="fa fa-check"></i><b>5.1</b> General EDAV</a><ul>
<li class="chapter" data-level="5.1.1" data-path="results.html"><a href="results.html#number-of-wars-by-type"><i class="fa fa-check"></i><b>5.1.1</b> Number of wars by type</a></li>
<li class="chapter" data-level="5.1.2" data-path="results.html"><a href="results.html#number-of-wars-by-state"><i class="fa fa-check"></i><b>5.1.2</b> Number of wars by state</a></li>
<li class="chapter" data-level="5.1.3" data-path="results.html"><a href="results.html#number-of-war-deaths"><i class="fa fa-check"></i><b>5.1.3</b> Number of war deaths</a></li>
<li class="chapter" data-level="5.1.4" data-path="results.html"><a href="results.html#correlation-between-wars-and-death-counts"><i class="fa fa-check"></i><b>5.1.4</b> Correlation between wars and death counts</a></li>
<li class="chapter" data-level="5.1.5" data-path="results.html"><a href="results.html#inter-state-wars-correlation-between-initiators-and-winners"><i class="fa fa-check"></i><b>5.1.5</b> Inter-state wars: Correlation between initiators and winners</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="results.html"><a href="results.html#world-war-i-and-world-war-ii"><i class="fa fa-check"></i><b>5.2</b> World War I and World War II</a></li>
<li class="chapter" data-level="5.3" data-path="results.html"><a href="results.html#external-statistics"><i class="fa fa-check"></i><b>5.3</b> External statistics</a><ul>
<li class="chapter" data-level="5.3.1" data-path="results.html"><a href="results.html#world-war-i"><i class="fa fa-check"></i><b>5.3.1</b> World War I</a></li>
<li class="chapter" data-level="5.3.2" data-path="results.html"><a href="results.html#world-war-ii"><i class="fa fa-check"></i><b>5.3.2</b> World War II</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>6</b> Interactive component</a><ul>
<li class="chapter" data-level="6.1" data-path="interactive-component.html"><a href="interactive-component.html#interactive-networks"><i class="fa fa-check"></i><b>6.1</b> Interactive networks</a></li>
<li class="chapter" data-level="6.2" data-path="interactive-component.html"><a href="interactive-component.html#interactive-choropleth-map"><i class="fa fa-check"></i><b>6.2</b> Interactive choropleth map</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>7</b> Conclusion</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Wars in History, 1816-2007</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-transformation" class="section level1">
<h1><span class="header-section-number">Chapter 3</span> Data transformation</h1>
<p>In this chapter, we discuss the process of getting the data into a form which we could easily work with in R.</p>
<div id="cow-data" class="section level2">
<h2><span class="header-section-number">3.1</span> COW data</h2>
<p>The 4 data sets we downloaded as csv files from COW website are clean with each variable defined clearly. Generally, for each question we are interested in exploring, we selected the related variables only and transformed them into the format for plotting, by dplyr package functions such as mutate(), select(), filter(), group_by(), summarise() and tidyr package functions like gather() and spread(). For example, to answer what types of wars happened most frequently, for each data set, we first added one column for its general war type, and then selected <code>WarNum</code>, <code>WarName</code>, and <code>WarType</code>, and finally combined 4 data frames by row. Specially, we changed the <code>WarType</code> as a factor to war type plus brief description. For another instance, to answer which states suffered from most losses of human beings in battles, we picked state name and number of battle death for each data set, and changed the data type of number of battle deaths into uniform numeric data type without comma. Then we replaced negative number of battle deaths with <code>NA</code>. Then the cleaned data is ready for row binding and the last step includes grouping by state and counting the sum of deaths for each state. Other data transformation processes are similar except for selection of different set of columns.</p>
<p>In order to answer some other questions incorporating both states and wars, for example, what states had most which type of wars, we performed more steps before combining by rows. It should be noticed that data sets of non-state wars, intra-state wars, and extra-state wars has each war as one row, which means there would be at least two states or sides for each row. Thus, in the three data sets, war name and war code are unique. On the other hand, in the inter-state data set, the <strong>combination</strong> of war name (war code) and state name is unique, which means one wars may range across multiple rows with each row recording information of one state involved in that war. It is the major different between these two kinds of data sets and we transformed data sets of intra-state, extra-state, and non-state wars into the format of data for inter-state wars. In other words, after the transformation, when all wars appear in one dataset, the pair of (WarName, StateName) is unique. The transformation algorithm is described below:</p>
<p><strong>Intra-state</strong>:</p>
<p>if a war appears with two sides, then:</p>
<ul>
<li><p>if CcodeA is valid, add new row (WarNum, WarName, WarType, StateName=sideA, ccode=CcodeA, BatDeath = SideADeaths) to data frame sideA;</p></li>
<li><p>if CcodeB is valid, add new row (WarNum, WarName, WarType, StateName=sideB, ccode=CcodeB, BatDeath = SideBDeaths) to data frame sideB;</p></li>
<li><p>row-bind sideA and sideB to form intra-state data frame with 6 variables WarNum, WarName, WarType, StateName, ccode, BatDeath.</p></li>
</ul>
<p><strong>Inter-state</strong>:</p>
<p>if ccode is valid, then</p>
<ul>
<li>add new row (WarNum, WarName, Type, StateName, ccode, BatDeath) to data frame inter-state with 6 variables WarNum, WarName, WarType, StateName, ccode, BatDeath.</li>
</ul>
<p><strong>Extra-state</strong>:</p>
<p>there are no wars with both SideA and SideB existing, which means each row represents a war with one side record and then:</p>
<ul>
<li><p>we can then safely add BatDeath and NonStateDeaths as total BatDeath</p></li>
<li><p>if ccode1 is valid, add new row (WarNum, WarName, WarType, StateName=SideA,ccode=ccode1, BatDeath) to data frame sideA;</p></li>
<li><p>if ccode2 is valid, add new row (WarNum, WarName, WarType, StateName=SideB,ccode=ccode2, BatDeath) to data frame sideb;</p></li>
<li><p>row-bind sideA and sideB to form extra-state data frame with 6 variables WarNum, WarName, WarType, StateName, ccode, BatDeath.</p></li>
</ul>
<p><strong>Non-state</strong>: these wars are not about countries or states, and thus we did not take them into consideration in this particular case.</p>
<p>Note that valid here means the ccode is not negative based on the codebook of COW and it exists in another data set provided by COW of a list of state and correspondong codes. Furthermore, all numbers of deaths were cleaned to become numbers.</p>
</div>
<div id="choropleth-maps" class="section level2">
<h2><span class="header-section-number">3.2</span> Choropleth maps</h2>
<p>When plotting choropleth maps, we found there are some states or countries that currently do not exist and consequently do not appear in Râ€™s world map data set, such as USSR. To deal with this issue, we recoded all countries that were in USSR during World War II as USSR and added those countries that still exist now into world data again. As a result, the world data set now should contain the geology data of all countries we have.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="data-sources.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="missing-values.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/wuyn639/warsinhistory/edit/master/03-cleaning.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/wuyn639/warsinhistory/blob/master/03-cleaning.Rmd",
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
